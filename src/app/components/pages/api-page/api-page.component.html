<app-column-layout [show]="api"> 
  
  <div class="api__content">
    <div class="api__table">
      <div class="api__table__header">
        <div class="api__table__header__title">
            <h1 class="heading-large">{{ api?.title }}</h1>
        </div>
        <div class="api__table__header__tags">
              <p class="hackney-tag hackney-tag--status">{{ api?.internal ? 'Internal' : 'External'}}</p> 
                <p class="hackney-tag hackney-tag--status">{{ api?.stage }}</p>  
        </div>
      </div>
      <div class="api__table__body">
        <div class="api__table__body__row" *ngIf="isDeployed('staging')">
            <div class="api__table__body--column1">
              <p class="api__table__body__title">Staging Base URL</p>
            </div>
            <div class="api__table__body--column2">
              <a class="api__table__body__link">{{ api?.staging.url }}</a>
            </div>
        </div>
        <div class="api__table__body__row" *ngIf="isDeployed('staging')">
            <div class="api__table__body--column1">
                <p class="api__table__body__title">Available in Staging</p>
            </div>
            <div class="api__table__body--column2">
                <p class="hackney-tag hackney-tag--{{isDeployed('staging') ? 'positive' : 'negative' }}"> {{isDeployed('staging') ? 'Yes' : 'No' }} </p>
                <p class="hackney-tag hackney-tag--{{isHealthy('staging') ? 'positive' : 'negative' }}"> {{isHealthy('staging') ? 'Healthy' : 'Not Healthy' }} </p>
            </div>
        </div>
        <div class="api__table__body__row"*ngIf="isDeployed('production')">
            <div class="api__table__body--column1">
                <p class="api__table__body__title">Production Base URL</p>
            </div>
            <div class="api__table__body--column2">
                <a class="govuk-link govuk-link--no-visited-state">{{ api?.production.url }}</a>
            </div>
        </div>
        <div class="api__table__body__row" *ngIf="isDeployed('production')">
            <div class="api__table__body--column1">
                <p class="api__table__body__title">Available in Production</p>
            </div>
            <div class="api__table__body--column2">
                <p class="hackney-tag hackney-tag--{{isDeployed('production') ? 'positive' : 'negative' }}"> {{isDeployed('production') ? 'Yes' : 'No' }} </p>
                <p class="hackney-tag hackney-tag--{{isHealthy('production') ? 'positive' : 'negative' }}"> {{isHealthy('production') ? 'Healthy' : 'Not Healthy' }} </p>
            </div>
        </div>
        <div class="api__table__body__row" *ngIf="api.github_url">
            <div class="api__table__body--column1">
                <p class="api__table__body__title">Github URL</p>
            </div>
            <div class="api__table__body--column2">
                <a class="govuk-link govuk-link--no-visited-state">{{api.github_url }}</a>
            </div>
        </div>
        <div class="api__table__body__row api__key" *ngIf="api.github_url">
            <div class="api__table__body--column1">
                <p class="api__table__body__title">API Key</p>
            </div>
            <div class="api__table__body--column2">
                <a class="" *ngIf="!apiKey">Request: </a>
                      <app-click-reveal *ngIf="apiKey" [apiKey]="apiKey"></app-click-reveal>
                    <p *ngIf="verified != null" class="hackney-tag hackney-tag--{{verified ? 'positive' : 'negative' }}"> {{verified ? 'Verified' : 'Not Verified' }} </p>
            </div>
            <div class="api__table__body--column3">             
                  <a class="hackney-button" (click)="requestAPIKey()" type="button" >Request API-Key</a>    
              </div>
        </div>
      </div>
    </div>
    <div class="api__details">
        <div class="api__details__overview">
            <h3 class="heading-large"> Overview</h3>
            <p class="paragraph-text"> {{ api.description }} </p>
          </div>
          <div class="api__details__compliance">
              <div class="api__details__compliance__header">
                  <div class="api__details__compliance__title">      
                      <h3 class="heading-large"> Compliance</h3>   
                    </div>
                          
                    <div class="api__details__compliance__tag">          
                      <h3 class="hackney-tag hackney-tag--{{isCompliant() ? 'negative' : 'positive' }}"> {{isCompliant() ? 'Non Compliant' : 'Compliant' }} </h3> 
                    </div>
              </div>
                <div class="api__details__compliance__text">  
                    <ul class="api__details__compliance__list">
                      <li *ngFor="let compliancy of generateCompliancyText()" [class.line-through] = "!compliancy.compliant">  {{compliancy.text}} </li>
                    </ul>       
                </div>
          </div>
    </div>
    <div class="api__owner">
            <div class="api__owner__content">
                <h3 class="heading-medium"> Product Owner</h3>
                <p class="paragraph-text"> Name: {{api.owner.product.name}} </p>
                <p class="paragraph-text"> Email: {{api.owner.product.contactDetails}} </p>
        
                <h3 class="heading-medium"> Technical Owner</h3>
                <p class="paragraph-text"> Name: {{api.owner.technical.name}} </p>
                <p class="paragraph-text"> Email: {{api.owner.technical.contactDetails}} </p>
            </div>
    </div>
  </div>

  <a routerLink="/documentation" class="hackney-button api-page__button">‚Üê Return to API Endpoints</a>
</app-column-layout>