<span class="govuk-heading-l">{{ this.api?.title }}             
  <strong class="govuk-tag">
    Edit
  </strong>
</span>
<div *ngIf="api">

  <a routerLink="/admin" class="govuk-back-link">Back To Api Management Page</a>

  <form class="form js-form" [formGroup]="apiForm" (ngSubmit)="submitForm()">

    <h2 class="govuk-heading-m"> General Details </h2>


    <div class="govuk-form-group">
      <label class="govuk-label" for="id">
        ID
      </label>
      <input type="text" autocomplete="off" id="id" name="id" formControlName="id" [ngClass]="{'govuk-input': true, 'govuk-!-width-two-thirds': true, 'govuk-input--error': f.id.touched && f.id.invalid}"
        aria-describedby="id" aria-required="true" />

      <div *ngIf="f.id.touched && f.id.invalid" class="govuk-error-message">
        Id is required
      </div>
    </div>

    <div class="govuk-form-group">
      <label class="govuk-label" for="title">
        Title
      </label>
      <input type="text" autocomplete="off" id="title" name="title" formControlName="title" [ngClass]="{'govuk-input': true, 'govuk-!-width-two-thirds': true, 'govuk-input--error': f.title.touched && f.title.invalid}"
        class="govuk-input" aria-required="true" />

      <div *ngIf="f.title.touched && f.title.invalid" class="govuk-error-message">
        Title is required
      </div>
    </div>


    <div class="govuk-form-group">
      <label class="govuk-label" for="title">
        Summary
      </label>
      <textarea class="govuk-textarea" id="summary" name="summary" formControlName="summary" rows="2" aria-required="true"
        [ngClass]="{'govuk-textarea': true, 'govuk-!-width-two-thirds': true, 'govuk-textarea--error': f.summary.touched && f.summary.invalid}"></textarea>
      <div *ngIf="f.summary.touched && f.summary.invalid" class="govuk-error-message">
        Summary is required
      </div>
    </div>

    <div class="govuk-form-group">
      <label class="govuk-label" for="title">
        Description
      </label>
      <textarea class="govuk-textarea" id="description" name="description" formControlName="description" rows="5"
        aria-required="true" [ngClass]="{'govuk-textarea': true, 'govuk-!-width-two-thirds': true, 'govuk-textarea--error': f.description.touched && f.description.invalid}"></textarea>
      <div *ngIf="f.description.touched && f.description.invalid" class="govuk-error-message">
        Description is required
      </div>
    </div>

    <div class="govuk-form-group">
      <h3 class="govuk-heading-m"> Is this application internally or externally facing? </h3>

      <div class="govuk-radios govuk-radios--inline">
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="internal" name="internal" type="radio" [value]="true" formControlName="internal">
          <label class="govuk-label govuk-radios__label" for="internal">
            <strong class="govuk-tag">
              Internal
            </strong>
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="external" name="internal" type="radio" [value]="false" formControlName="internal">
          <label class="govuk-label govuk-radios__label" for="external">
            <strong class="govuk-tag">
              External
            </strong>
          </label>
        </div>
      </div>
    </div>
    <div class="govuk-form-group">
      <h3 class="govuk-heading-m"> What stage is this application in? </h3>
      <div class="govuk-radios govuk-radios--inline">
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="stage_alpha" name="stage" type="radio" value="alpha" formControlName="stage">
          <label class="govuk-label govuk-radios__label" for="stage_alpha">
            <strong class="govuk-tag">
              Alpha
            </strong>
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="external" name="stage" type="radio" value="beta" formControlName="stage">
          <label class="govuk-label govuk-radios__label" for="external">
            <strong class="govuk-tag">
              Beta
            </strong>
          </label>
        </div>
        <div class="govuk-radios__item">
          <input class="govuk-radios__input" id="external" name="stage" type="radio" value="live" formControlName="stage">
          <label class="govuk-label govuk-radios__label" for="external">
            <strong class="govuk-tag">
              Live
            </strong>
          </label>
        </div>
      </div>
    </div>

    <div formGroupName="compliant" class="govuk-form-group">
      <h3 class="govuk-heading-m"> Compliancy </h3>

      <div class="govuk-checkboxes__item" *ngFor="let compliancyObject of generateCompliancyObjects()">
        <input class="govuk-checkboxes__input" id="{{compliancyObject.id}}" name="{{compliancyObject.id}}" type="checkbox"
          formControlName="{{compliancyObject.id}}">
        <label class="govuk-label govuk-checkboxes__label" for="{{compliancyObject.id}}">
          {{ compliancyObject.text }}
        </label>
      </div>
    </div>


    <div class="govuk-form-group" formGroupName="staging">
      <h3 class="govuk-heading-m"> Staging Environment</h3>
      <div class="govuk-form-group">
        <label class="govuk-label" for="url">
          Base Url
        </label>
        <input type="url" autocomplete="off" id="url" name="url" formControlName="url" [ngClass]="{'govuk-input': true, 'govuk-!-width-two-thirds': true, 'govuk-input--error': f.staging.controls.url.touched && f.staging.controls.url.invalid}"
          class="govuk-input" aria-required="true" />
      </div>

      <div class="govuk-form-group">
        <label class="govuk-label" for="url">
          Swagger JSON Url
        </label>
        <input type="swagger_url" autocomplete="swagger_url" id="swagger_url" name="swagger_url" formControlName="swagger_url"
          [ngClass]="{'govuk-input': true, 'govuk-!-width-two-thirds': true, 'govuk-input--error': f.staging.controls.swagger_url.touched && f.staging.controls.swagger_url.invalid}"
          class="govuk-input" aria-required="true" />
      </div>

      <div class="govuk-form-group">
        <h3 class="govuk-heading-s"> Has this application been deployed? </h3>
        <div class="govuk-radios govuk-radios--inline">
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="staging_deployed_true" type="radio" [value]="true" formControlName="deployed">
            <label class="govuk-label govuk-radios__label" for="staging_deployed_true">
              Yes
            </label>
          </div>
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="staging_deployed_false" type="radio" [value]="false" formControlName="deployed">
            <label class="govuk-label govuk-radios__label" for="staging_deployed_false">
              No
            </label>
          </div>
        </div>
      </div>

    </div>

    <div class="govuk-form-group" formGroupName="production">
      <h3 class="govuk-heading-m"> Production </h3>
      <div class="govuk-form-group">
        <label class="govuk-label" for="url">
          Base Url
        </label>
        <input type="url" autocomplete="off" id="url" name="url" formControlName="url" [ngClass]="{'govuk-input': true, 'govuk-!-width-two-thirds': true, 'govuk-input--error': f.production.controls.url.touched && f.production.controls.url.invalid}"
          class="govuk-input" aria-required="true" />
      </div>

      <div class="govuk-form-group">
        <label class="govuk-label" for="url">
          Swagger JSON Url
        </label>
        <input type="swagger_url" autocomplete="swagger_url" id="swagger_url" name="swagger_url" formControlName="swagger_url"
          [ngClass]="{'govuk-input': true, 'govuk-!-width-two-thirds': true, 'govuk-input--error': f.production.controls.swagger_url.touched && f.production.controls.swagger_url.invalid}"
          class="govuk-input" aria-required="true" />
      </div>

      <div class="govuk-form-group">
        <h3 class="govuk-heading-m"> Has this application been deployed? </h3>
        <div class="govuk-radios govuk-radios--inline">
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="deployed_true" name="deployed" type="radio" [value]="true"
              formControlName="deployed" aria-required="true" />
            <label class="govuk-label govuk-radios__label" for="deployed_true">
              Yes
            </label>
          </div>
          <div class="govuk-radios__item">
            <input class="govuk-radios__input" id="deployed_false" name="deployed" type="radio" [value]="false"
              formControlName="deployed">
            <label class="govuk-label govuk-radios__label" for="deployed_false">
              No
            </label>
          </div>
        </div>
      </div>
    </div>

    <div class="govuk-form-group">
      <label class="govuk-label" for="github_url">
        Github URL
      </label>
      <input type="github_url" autocomplete="off" id="github_url" name="github_url" formControlName="github_url"
        [ngClass]="{'govuk-input': true, 'govuk-!-width-two-thirds': true, 'govuk-input--error': f.github_url.touched && f.github_url.invalid}"
        class="govuk-input" aria-required="true" />

      <div *ngIf="f.github_url.touched && f.github_url.invalid" class="govuk-error-message">
        Github URL is required
      </div>
    </div>

    <div class="govuk-form-group">
      <button id="submitButton" class="govuk-button" type="submit" [disabled]="!apiForm.valid">Submit your changes</button>
    </div>
  </form>
</div>
